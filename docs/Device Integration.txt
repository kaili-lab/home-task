

# 设备接入概念说明（Device Integration）

> 本文档定义 **展示设备作为外部系统** 接入时的角色、边界与安全底线。  
>  
> - 不涉及具体协议或实现  
> - 不定义 MQTT / HTTP 细节  
> - 依赖 `domain-model.md` 中的业务概念  

---

## 1. 文档定位

### 1.1 本文档负责

- 定义 Device 在系统中的角色
- 明确 Device 的能力边界
- 设定最低限度的安全与身份原则

### 1.2 本文档不负责

- 硬件选型
- 固件实现
- 通信协议参数配置

---

## 2. Device 的系统角色

### 2.1 Device 定义

- 一个独立的硬件实体  
  （如 ESP32 + LCD / 墨水屏 / 其他显示终端）
- 用于**展示某个 Group 的任务信息**

### 2.2 Device 不是

- ❌ User
- ❌ Task 的创建者
- ❌ 业务逻辑的决策者

---

## 3. Device 与 Group 的关系

- 一个 Device 只能绑定一个 Group
- 一个 Group 最多绑定一个 Device

**含义说明：**
- Device 是 Group 的“物理展示端”
- 所有展示内容都来源于 Group 的当前状态

---

## 4. Device 的能力边界

### 4.1 Device 可以做的事

- 接收系统推送的任务数据
- 展示 Group 的任务列表或状态
- 上报自身状态（如在线 / 离线）

### 4.2 Device 不可以做的事

- 创建、修改或删除 Task
- 管理 Group 成员
- 代表 User 执行业务操作

---

## 5. 设备身份与安全（原则级）

### 5.1 身份原则

- ✅ 每个 Device 必须有唯一身份
- ✅ 系统能够区分不同 Device
- ✅ Device 的访问权限可以被撤销

---

### 5.2 通信安全底线

- ✅ 所有 Device ↔ 系统 的通信必须加密
- ✅ Device 只能访问其绑定 Group 的数据
- ❌ 不要求企业级或硬件级安全方案

---

## 6. Device 生命周期（概念）

1. 被创建或注册
2. 被用户绑定到某个 Group
3. 接收并展示 Group 数据
4. 被解绑或撤销访问权限

---

## 7. 与未来功能的关系

- Device 不直接与 AI Agent 交互
- AI Agent 不改变 Device 的权限模型
- Device 始终是“被动展示者”

---

## 8. 对 AI 的约束（重要）

当 AI 生成设备相关代码或设计时：

- ✅ 必须遵守本文档中的能力边界
- ❌ 不得赋予 Device 用户能力
- ❌ 不得突破“一设备一群组”的约束

---

## 9. 维护原则

- 可随设备接入方案逐步细化
- 不应频繁改变核心边界定义
- 技术实现细节应放在独立文档中

---

