

# 核心领域模型（Domain Model）

> 本文档定义系统中**稳定的业务概念、不变量与实体关系**。  
>  
> - 不包含任何实现细节  
> - 不定义数据库字段或 API  
> - 是所有技术设计（API / DB / Device）的语义基础  

---

## 1. 文档定位

### 1.1 本文档负责

- 定义系统的核心实体（Entity）
- 统一实体含义，防止语义漂移
- 明确不可被轻易打破的业务约束（Invariants）

### 1.2 本文档不负责

- 数据库存储结构
- 接口设计
- 权限与安全实现方案

---

## 2. 核心实体（Core Entities）

### 2.1 User（用户）

**定义：**
- 系统的主要使用者
- 对应一个真实的人

**核心特征：**
- 可以加入多个 Group
- 可以在 Group 中创建和管理 Task
- 是所有业务行为的发起者

**不变量：**
- ✅ 所有 Task 都必须由 User 创建或触发
- ❌ User 的行为不能由 Device 代替

---

### 2.2 Group（群组）

**定义：**
- 一个共享任务与日程的逻辑空间
- 用于组织用户与其任务

**核心特征：**
- 包含多个 User
- 包含多个 Task
- 可以绑定一个展示 Device

**不变量：**
- ✅ Task 必须且只能属于一个 Group
- ✅ Group 是任务展示与管理的最小边界
- ❌ 一个 Group 不能同时绑定多个 Device

---

### 2.3 Task（任务）

**定义：**
- 表示一个需要完成或跟踪的事项
- 是系统中最核心的业务对象

**核心特征：**
- 必须属于一个 Group
- 由 User 创建
- 具有明确状态（如：未完成 / 已完成）

**生命周期（概念级）：**
1. 创建
2. 查看 / 更新
3. 完成或删除

**不变量：**
- ✅ Task 的归属对象是 Group，而不是 User
- ✅ Task 的责任来源始终是 User
- ❌ Task 不直接与 Device 交互

---

## 3. 实体关系总览（文字版）

- User ⟶ 加入 ⟶ Group  
- Group ⟶ 包含 ⟶ Task  
- User ⟶ 创建 / 更新 ⟶ Task  

---

## 4. 未来兼容性约束（非设计）

- Task 未来可能由 AI 辅助生成  
- 但 Task 的**责任主体仍然是 User**
- AI 不改变 Task / Group / User 的基本关系

---

## 5. 对 AI 的约束（重要）

当 AI 生成代码、接口或结构时：

- ✅ 必须遵守本文档中的实体定义
- ❌ 不得引入本文档中不存在的核心实体
- ❌ 不得修改不变量而不更新本文档

---

## 6. 维护原则

- 仅在**核心概念或关系变化**时更新
- 不随实现细节变化更新
- 修改应慎重且明确

---

